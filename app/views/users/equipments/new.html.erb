<div class="container py-5">
  <div class="row d-flex justify-content-center">

    <div class="col-md-8">
      <h3 class="text-center pb-5">アイテム投稿</h3>

      <div class="text-center bg-primary"><!--エラー文-->
        <% if @equipment.errors.any? %>
          <ul class="list-unstyled">
            <% @equipment.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        <% end %>
      </div>

      <%= form_with model: @equipment, url: equipments_path, method: :post do |f| %>

      <div class="form-group">
        <div class="row">
          <div class="col-md-4 d-flex justify-content-start justify-content-md-end align-items-center">
            <%= f.label :name, '名前', class: 'm-0' %>
          </div>
          <div class="col-md-8">
            <%= f.text_field :name, class: 'form-control' %>
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="row">
          <div class="col-md-4 d-flex justify-content-start justify-content-md-end align-items-center">
            <%= f.label :description, '説明', class: 'm-0' %>
          </div>
          <div class="col-md-8">
            <%= f.text_area :description, class: 'form-control', rows: 10 %>
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="row">
          <div class="col-md-4 d-flex justify-content-start justify-content-md-end align-items-center">
            <%= f.label :evaluation, '評価', class: 'm-0' %>
          </div>
          <div class="col-md-8">
            <span id="evaluation"></span>
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="row mt-3">
          <div class="col-md-8 offset-0 offset-md-4">
            <button type="submit" class="btn btn-primary btn-block">投稿する</button>
          </div>
        </div>
      </div>

      <% end %>

    </div>

  </div>
</div>

<script>
  $(document).ready(function(){
    let elem = document.querySelector('#evaluation');
    if (elem == null) return;

    elem.innerHTML = ""
    raty(elem, {
      starOn: "<%= asset_path('raty/star-on.png') %>",
      starOff: "<%= asset_path('raty/star-off.png') %>",
      starHalf: "<%= asset_path('raty/star-half.png') %>",
      scoreName: "equipment[evaluation]",
      half: true
    });
  });
</script>